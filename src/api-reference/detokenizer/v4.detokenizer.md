---
title: Detokenizer v4
layout: reference
---

{% include prerelease.html %}

The Detokenizer service allows clients to retrieve the user's credit card number from Concur Expense in a secure way. The Detokenizer service returns the user's credit card number encrypted with a public key that the client provides in the request. The client will be able to decrypt the user's credit card number using their private key.

> **Limitations**: This API is only available to clients who have been granted access by SAP Concur. Access to this documentation does not provide access to the API.

## Contents
* [Products and Editions](#products-editions)
* [Scope Usage](#scope-usage)
* [Dependencies](#dependencies)
* [Access Token Usage](#access-token-usage)
* [Get Credit Card Account Details](#get-credit-card-account-details)
* [Schema](#schema)
  * [Account Number](#schema-account-number)

## <a name="products-editions"></a>Products and Editions

* Concur Expense Professional Edition

## <a name="scope-usage"></a>Scope Usage

Name|Description|Endpoint
---|---|---
`creditcardaccountnumber.read` or `creditcardaccount.read`|Reads credit card data from Concur Expense.|GET

## <a name="dependencies"></a>Dependencies

SAP Concur clients must purchase Concur Expense in order to use this API.

## <a name="access-token-usage"></a>Access Token Usage

This API supports company level access tokens.

## <a name="get-credit-card-account-details"></a>Get Credit Card Account Details

Returns the credit card number encrypted with the public key provided in the request.

### Scopes

`creditcardaccountnumber.read or creditcardaccount.read` - Refer to [Scope Usage](#scope-usage) for full details.

### Request

```shell
GET https://{region}.api.concursolutions.com/detokenizer/v1/company/{companyUUID}/creditcard/{creditcardGUID}
```

##### Parameters

Name|Type|Format|Description
---|---|---|---
`pubkeyAlgorithm `|`string`|-|The RSA algorithm used by the `PublicKey` for credit card number encryption.
`pubkeyFormat  `|`string`|-|Public key format.
`pubkey `|`string`|-|Public key.
`companyUUID `|`string`|-|Company UUID.
`creditcardGUID `|`string`|-|Credit card GUID.

#### Headers

* [RFC 7235 Authorization](https://tools.ietf.org/html/rfc7235#section-4.2) : Header used for authorization. Should be specified in the format 'Bearer JWT_Token'. This is a Company JWT token.

#### Payload

* None.

### Response

#### Status Codes

* [400 Bad Request](https://tools.ietf.org/html/rfc7231#section-6.5.1)
* [404 Not Found](https://tools.ietf.org/html/rfc7231#section-6.5.4)
* [500 Internal Server Error](https://tools.ietf.org/html/rfc7231#section-6.6.1)

#### Headers

* `concur-correlationid` is an SAP Concur specific custom header used for technical support in the form of a [RFC 4122 A Universally Unique IDentifier (UUID) URN Namespace](https://tools.ietf.org/html/rfc4122)
* [RFC 7231 Content-Type](https://tools.ietf.org/html/rfc7231#section-3.1.1.5)
* [RFC 7230 Content-Length](https://tools.ietf.org/html/rfc7230#section-3.3.2)

#### Payload
* [Account Number](#schema-account-number)

### Example

#### Request

```shell
GET https://us.api.concursolutions.com/detokenizer/v1/company/d295261b-e624-442b-b771-9c7f00c1ed9a/creditcard/BB98EABE1DDA7B48B858CFDC7EEE2A10?pubkeyAlgorithm=rsa_pkcs7&pubkeyFormat=cert&pubkey=PUBLIC_KEY
Authorization: Bearer JWT_TOKEN
Accept: application/json
```

#### Response

```shell
HTTP/1.1 200 OK
concur-correlationid: 87de8598-dbd5-4aea-af9d-988efb61c468
Content-Type: application/json
Content-Length: 1270
```

```json
{
 "accountNumber": "MIAGCSqGSIb3DQEHA6CAMIACAQAxgbUwgbICAQAwGzAPMQ0wCwYDVQQDDARUZXN0AghyaD1Uj9uSsDANBgkqhkiG9w0BAQEFAASBgAk0/9Yd5CQt5/6vQ1gO9aSivBJrv4AOAluZ876tqVI+fCZi7P1YojC4nTkvl358zfD3vXE3ehj14FfIPZlwmuVlSZF4ad5ni2B78fs5Jr6lxhG9iPU0FyFv+NhuIet/mpEaaX2CWB8CUwkTVdDyT5UjrwqsvYpRCwLz0Hx76BO8MIAGCSqGSIb3DQEHATAdBglghkgBZQMEAQIEEPo3PO3VplgQ4mN0L5KInPKggAQgkqu7zWslGq3uqw0G2WXkK0QA2p0YHQuwhEPT2JMF5mUAAAAAAAAAA"
}
```

## <a name="schema"></a>Schema

### <a name="schema-account-number"></a>Account Number

Name|Type|Format|Description
---|---|---|---
`accountNumber `|`string`|-|Encrypted credit card account number.
